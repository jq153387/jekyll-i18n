{% assign obj = include.obj | default: page %}

{% if obj.content_id %}
  {% assign content_id = obj.content_id %}
{% else %}
  {% if obj.collection %}
    {% assign collection_path = obj.collection | prepend: "_" | append: "/" %}
    {% assign path_in_collection = obj.path | remove_first: collection_path %}
  {% else %}
    {% assign path_in_collection = obj.path %}
  {% endif %}
  {% assign content_id = path_in_collection | split: "." | pop | join: "." %}
{% endif %}
