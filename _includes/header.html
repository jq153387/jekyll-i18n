<header class="site-header" role="banner">
  <div class="wrapper">
    
    <a class="site-title" href="{{ site.baseurl }}{{ locale_baseurl }}/">{{ site.title | escape }}</a>

    {% assign pages_collection = "pages" | append: page_collection_suffix %}

    <nav class="site-nav">
      <ul class="pages-nav" aria-label="{{ locale_strings.site_navigation }}">
        {% assign current_url = page.url %}
        {% assign pages = site[pages_collection] %}
        {% if pages.size > 0 %}
        {% assign pages = pages | sort: "order" %}
        {% endif %}
        {% for page in pages %}
        {% if page.title %}
        <li><a href="{{ page.url | prepend: site.baseurl }}" {% if page.url == current_url %}aria-current="page"{% endif %}>{{ page.title | escape }}</a></li>
        {% endif %}
        {% endfor %}
      </ul>

      <ul class="lang-switcher" aria-label="{{ locale_strings.language_selector }}">
        {% for locale in site.locales %}
        {% assign locale_label = locale[0] %}
        {% assign locale_obj = locale[1] %}
        {% assign attributes = "" %}
        {% if locale_label == page.locale %}
          {% assign url = page.url %}
          {% assign attributes = 'aria-current="true"' %}
        {% else %}
          {% assign localized_page = page_locales | where: "locale", locale_label | first %}
          {% if localized_page %}
            {% assign url = localized_page.url %}
          {% else %}
            {% assign url = locale_label | prepend: '/' | remove: '/default' | append: "/" %}
            {% assign attributes = 'class="not-available"' %}
          {% endif %}
        {% endif %}
        <li><a href="{{ site.baseurl }}{{ url }}" lang="{{ locale_obj.lang }}" {{ attributes }}>{{ locale_obj.name }}</a></li>
        {% endfor %}
      </ul>
    </nav>

  </div>
</header>
